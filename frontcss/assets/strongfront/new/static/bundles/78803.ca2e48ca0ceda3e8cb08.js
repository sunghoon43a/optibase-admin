(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[78803],{665197:t=>{t.exports={"css-value-widgetbar-tabs-width":"45px","css-value-widgetbar-border-width":"1px"}},949279:t=>{t.exports={wrapper:"wrapper-QjsFciMd",hintPlaceholder:"hintPlaceholder-QjsFciMd"}},76804:t=>{t.exports={widgetbarButton:"widgetbarButton-tGxPdSaN"}},147023:t=>{t.exports={"css-value-widgets-margin":"4px",widget:"widget-X9EuSe_t",widgetHeader:"widgetHeader-X9EuSe_t",widgetTitle:"widgetTitle-X9EuSe_t",headerSpace:"headerSpace-X9EuSe_t"}},567849:t=>{t.exports={}},564787:(t,e,i)=>{"use strict";var s;i.d(e,{WIDGET_BAR_MESSAGE_BUS:()=>a});const a=new((s=class{postMessage(t,e){s._handlers.forEach((i=>{i.handler(t,e)}))}onMessage(t){"function"==typeof t&&s._handlers.push({handler:t,widget:this})}offMessage(t){if("function"==typeof t){const e=s._handlers.findIndex((e=>e.handler===t));-1!==e&&s._handlers.splice(e,1)}}offWidget(t){s._handlers=s._handlers.filter((e=>e.widget!==t))}})._handlers=[],s)},979353:(t,e,i)=>{"use strict";i.r(e),i.d(e,{WidgetBar:()=>le});var s=i(852290),a=(i(957879),i(650151)),n=(i(161530),i(665197),i(444372)),o=i(66732),r=i(50959),l=i(500962),h=i(129025);const d={isActive:!1,notificationCount:0,notificationCounterAriaLabel:""};class c{constructor(t){const e={...d,...t};this.isActive=new h.WatchedValue(e.isActive),this.notificationsCount=new h.WatchedValue(e.notificationCount),this.notificationCounterAriaLabel=new h.WatchedValue(e.notificationCounterAriaLabel),this.icon=new h.WatchedValue(e.icon),this.hint=new h.WatchedValue(e.hint),this.onClick=new h.WatchedValue(e.onClick),this.TabButtonComponent=t.TabButtonComponent}onActiveStateChange(t){this.isActive.setValue(t)}updateNotifications(t){this.notificationsCount.setValue(t)}updateNotificationCounterAriaLabel(t){this.notificationCounterAriaLabel.setValue(t)}}var g=i(191085),u=i(345848),v=i(354277),p=i(66957),w=i(335802),m=i(836914),b=i(242765),f=i(425403),_=i(481891),y=i(232064),B=i(151286),C=i(496220),W=i(525336),M=i(786548),S=i(452970),E=i(981132),H=i(147023);const x=parseInt(H["css-value-widgets-margin"]),T=t=>{(0,u.trackEvent)("GUI","Calendar right panel",t)},L={reuters_calendar:{title:n.t(null,void 0,i(570779)),emptyHeader:!0,ctor:null,lazyLoad:!0,widgetClass:H.widget,headerClass:H.widgetHeader,noHeaderSpace:!0,options:{trackAction:T,showTableHeader:!0}},earnings_calendar:{title:n.t(null,void 0,i(713823)),ctor:null,lazyLoad:!0,emptyHeader:!0,widgetClass:H.widget,headerClass:H.widgetHeader,margin:x},watchlist:{title:n.t(null,void 0,i(213402)),ctor:null,lazyLoad:!0,chartWidgetAllowed:!0,emptyHeader:!0,widgetClass:H.widget,headerClass:H.widgetHeader,margin:x,preloadDelay:6e4},hotlist:{title:n.t(null,void 0,i(20931)),ctor:null,lazyLoad:!0,chartWidgetAllowed:!0,emptyHeader:!0,widgetClass:H.widget,headerClass:H.widgetHeader,margin:x},detail:{title:n.t(null,void 0,i(557027)),ctor:null,lazyLoad:!0,chartWidgetAllowed:!0,widgetClass:H.widget,headerClass:H.widgetHeader,margin:x,emptyHeader:!0,noHeaderSpace:!0},news:{title:n.t(null,void 0,i(303160)),ctor:null,
noHeaderSpace:!0,widgetClass:H.widget,headerClass:H.widgetHeader,titleClass:H.widgetTitle,margin:x},notifications_user:{title:n.t(null,void 0,i(230163)),ctor:null,options:{type:"user"},chartWidgetAllowed:!0},notifications_following:{title:n.t(null,void 0,i(406501)),ctor:null,options:{type:"following"},chartWidgetAllowed:!0,noHeader:(0,v.personalIdeaFeedAvailable)()},datawindow:{title:n.t(null,void 0,i(409068)),ctor:null,chartWidgetAllowed:!0,chartWidgetRequired:!0},notes:{title:n.t(null,void 0,i(137706)),ctor:null,lazyLoad:!0,chartWidgetAllowed:!0},alerts_manage:{ctor:null,lazyLoad:!0,chartWidgetAllowed:!0,emptyHeader:!0,noHeaderSpace:!0,doNotClearNotifications:!0,doNotClearNotificationsOnVisibilityChange:!0,widgetClass:H.widget,headerClass:H.widgetHeader,margin:x},alerts_log:{ctor:null,chartWidgetAllowed:!0,emptyHeader:!0,noHeaderSpace:!0,doNotClearNotifications:!0,doNotClearNotificationsOnVisibilityChange:!0,widgetClass:H.widget,headerClass:H.widgetHeader,margin:x},market_summary:{title:n.t(null,void 0,i(102467)),ctor:null},object_tree:{title:n.t(null,void 0,i(326371)),ctor:null,emptyHeader:!0,headerClass:H.widgetHeader,noHeaderSpace:!0,chartWidgetAllowed:!0,chartWidgetRequired:!0},streams:{title:n.t(null,void 0,i(841888)),ctor:null,emptyHeader:!0,widgetClass:H.widget,headerClass:H.widgetHeader,margin:x,doNotClearNotifications:!0,doNotClearNotificationsOnVisibilityChange:!0},unionchats:{ctor:null,emptyHeader:!0,widgetClass:H.widget,headerClass:H.widgetHeader,margin:x,chartWidgetAllowed:!0,noHeaderSpace:!0},pine_logs:{title:n.t(null,void 0,i(639434)),ctor:null,chartWidgetAllowed:!0,noHeader:!0,widgetClass:H.widget,margin:x}},z={base:g};z["economic-calendar"]=p,z["alarm-clock"]=w,z.hotlists=m,z.calendar=b,z.notes=f,z.chat=_,z.messages=y,z["ideas-stream"]=B,z.notifications=C,z.streams=W,z.news=M,z["object-tree"]=S,z.datawindow=E;var V=i(497754),A=i.n(V),k=i(581996),N=i(707957),P=i(583912),I=i(571690),R=i(62802);class O{constructor(t){this._settingsKey=null,this._value=null,this._watchedValue=new h.WatchedValue(null),t&&t.settingsKey&&(this._settingsKey=t.settingsKey,this._value=R.getJSON(this._settingsKey,null),this._watchedValue=new h.WatchedValue(this._value)),t&&t.widgetBarWidget&&Object.defineProperty(this,"widgetBarWidget",{value:t.widgetBarWidget,configurable:!0})}value(){return this._value}setValue(t,e){return this._value=t,this._watchedValue.setValue(this._value),this._settingsKey&&(null==t?((0,u.trackEvent)("Settings debug","WigdetProperties.setValue: "+this._settingsKey,window.user.username),R.remove(this._settingsKey)):R.setJSON(this._settingsKey,t,e)),this._value}readonly(){return this._watchedValue.readonly()}destroy(){this._watchedValue.destroy()}}var D=i(318557),Z=i(564787),F=i(541558),j=i(404573),$=i(957879);class U{constructor(t){this.heightRatio=U.heightRatio,this.minHeight=0,this.widgetConfig=null,this.widgetActive=new h.WatchedValue,this.widgetMaximized=new h.WatchedValue,this.widgetVisible=null,this.symbolLinking=null,this.intervalLinking=null,this._header=null,this._widget=null,
this._headerIcon=null,this._headerspace=null,this._title=null,this._resizehandle=null,this._widgetStarted=new N.Delegate,this._resizer=null,this._internalState={alive:new h.WatchedValue(!0),container:new h.WatchedValue,width:new h.WatchedValue,height:new h.WatchedValue,detachable:new h.WatchedValue(!1)},t&&t.widgetBarPage&&(this.widgetBarPage=t.widgetBarPage),this._rdState=new k.ResizerDetacherState(this._internalState),this._rdState.owner.subscribe((t=>{t!==this._internalState&&$(this._internalState.container.value()).empty()}))}element(t){switch(t){case"widget":return this._widget;case"header":return this._header;case"resize-handle":return this._resizehandle;default:return null}}setHeight(t){this._internalState.container.value()&&(this._internalState.container.value().style.height=t+"px"),this._internalState.height.setValue(t)}onWidthChange(t){this._internalState.width.setValue(t)}remove(){this.widgetBarPage&&this.widgetBarPage.removeWidget(this)}destroy(){var t,e,i,s,a,n;this.widgetObject&&"destroy"in this.widgetObject&&this.widgetObject.destroy(),this.remove(),this.symbolLinking&&(this.symbolLinking.destroy(),this.symbolLinking=null),this.intervalLinking&&(this.intervalLinking.destroy(),this.intervalLinking=null),this.widgetVisible&&(this.widgetVisible.unsubscribe(),this.widgetVisible=null),this.widgetActive&&(this.widgetActive.unsubscribe(),this.widgetActive=null),this.widgetMaximized&&(this.widgetMaximized.unsubscribe(),this.widgetMaximized=null),this.properties&&(this.properties.destroy(),delete this.properties),null===(t=this._header)||void 0===t||t.remove(),null===(e=this._widget)||void 0===e||e.remove(),null===(i=this._headerIcon)||void 0===i||i.remove(),null===(s=this._headerspace)||void 0===s||s.remove(),null===(a=this._title)||void 0===a||a.remove(),null===(n=this._resizehandle)||void 0===n||n.remove(),this._header=null,this._widget=null,this._headerIcon=null,this._headerspace=null,this._title=null,this._resizehandle=null,Z.WIDGET_BAR_MESSAGE_BUS.offWidget(this),this._preloadTimeout&&clearTimeout(this._preloadTimeout)}rdState(){return this._rdState}onActiveStateChange(t){var e;const i=(this.getWidgetBarOption("widgetConfig")||L)[this.type];t&&!i.doNotClearNotifications&&this.clearNotifications(),this.updateVisibleWatchedValue(),null===(e=this.widgetActive)||void 0===e||e.setValue(!!t)}toggleMaximize(t){var e,i,s;const a="boolean"!=typeof t?!(null===(e=this.widgetMaximized)||void 0===e?void 0:e.value()):t;a!==(null===(i=this.widgetMaximized)||void 0===i?void 0:i.value())&&(null===(s=this.widgetMaximized)||void 0===s||s.setValue(a),this.widgetBarPage&&this.widgetBarPage.widgetBarLayout&&this.widgetBarPage.widgetBarLayout.widgetBar&&this.widgetBarPage.widgetBarLayout.widgetBar.saveToTVSettings(),this.widgetBarPage&&this.widgetBarPage.updateWidgetsHeight())}startWidget(){var t;if(this.widgetObject||this.widgetStartDelayed)return;if(!this.id)return;const e=this.getWidgetBarOption("widgetConfig")||L;if(!this.type)return;const i=e[this.type];if(!i)return;const s=i.ctor;if(!s)return
;if(this.widgetVisible=this.widgetVisible||new h.WatchedValue,this.updateVisibleWatchedValue(),i.lazyLoad&&!this.widgetVisible.value())return this.widgetStartDelayed=!0,this.widgetVisible.when((()=>{delete this.widgetStartDelayed,this.startWidget(),clearTimeout(this._preloadTimeout)})),void(i.preloadDelay&&(this._preloadTimeout=setTimeout((()=>{s.preload&&s.preload()}),i.preloadDelay)));this.symbolLinking=P.linking.proSymbol.spawn(),this.intervalLinking=P.linking.interval.spawn();const n=this._rdState.bridge(),o={...{$widget:this.$widget,$header:this.$header,$headerspace:this.$headerspace,$body:$(n.container.value())},header:(0,a.ensureNotNull)(this._header),headerspace:this._headerspace,widget:(0,a.ensureNotNull)(this._widget),container:n.container.value(),properties:this.properties,notify:this.notify.bind(this),clearNotifications:this.clearNotifications.bind(this),visible:this.widgetVisible.readonly(),active:(0,a.ensureNotNull)(this.widgetActive).readonly(),symbol:this.symbolLinking,interval:this.intervalLinking,height:n.height,setMinHeight:this.setMinHeight.bind(this),width:n.width,setTitle:this.setTitle.bind(this),setTitleHtml:this.setTitleHtml.bind(this),id:this.id,toggleMaximize:this.toggleMaximize.bind(this),maximized:(0,a.ensureNotNull)(this.widgetMaximized).readonly(),postMessage:Z.WIDGET_BAR_MESSAGE_BUS.postMessage.bind(this),onMessage:Z.WIDGET_BAR_MESSAGE_BUS.onMessage.bind(this),offMessage:Z.WIDGET_BAR_MESSAGE_BUS.offMessage.bind(this),hideDetach:!1,unAuthEditable:this.unAuthEditable};if(i.chartWidgetAllowed){const t=()=>this.widgetBarPage&&this.widgetBarPage.widgetBarLayout&&this.widgetBarPage.widgetBarLayout.widgetBar&&this.widgetBarPage.widgetBarLayout.widgetBar.chartWidgetCollection;o.getChartWidget=()=>{const e=t();return e?e.activeChartWidget.value():null},o.getChartWidgetCollection=()=>t()||null}void 0!==this.readonly?this.readonly&&(o.readonly=!0):this.getWidgetBarOption("readonly")&&(o.readonly=!0),void 0!==i.options&&(o.options=i.options),null!=this.stateData?o.data=this.stateData:null!=i.data&&(o.data=i.data);const r=this.widgetObject=new s(o);"hasLifecycle"in r&&(null===(t=this.widgetActive)||void 0===t||t.readonly().subscribe((t=>{t?r.mount():r.unmount()}),{callWithLast:!i.lazyLoad})),this._widgetStarted.fire(this)}widgetStarted(){return this._widgetStarted}notify(t,e={}){if(this.widgetBarPage&&(!this.widgetBarPage.isActiveAndVisible()||e.force))return this.widgetBarPage.notify(t,e)}clearNotifications(){if(this.widgetBarPage)return this.widgetBarPage.clearNotifications()}onVisibilityChange(){this.updateVisibleWatchedValue()}updateVisibleWatchedValue(){this.widgetVisible&&this.widgetVisible.setValue(!!this.widgetBarPage&&this.widgetBarPage.isActiveAndVisible())}setTitle(t){this.customTitle=String(t),this._title&&(this._title.textContent=this.getTitle())}setTitleHtml(t){this._title&&(0,D.html)(this._title,t)}setMinHeight(t){const e=this.widgetBarPage;e&&(this.minHeight=0,this.minHeight=Math.min(t,e.getAvailableHeight()),e.updateWidgetsHeight())}getWidgetBarOption(t){
if(this.widgetBarPage&&this.widgetBarPage.widgetBarLayout&&this.widgetBarPage.widgetBarLayout.widgetBar&&t in this.widgetBarPage.widgetBarLayout.widgetBar)return this.widgetBarPage.widgetBarLayout.widgetBar[t]}getTitle(t){const e=function(t,e){var i,s;try{let a=null===(i=(e=e||L)[t])||void 0===i?void 0:i.title;return!a&&t&&(a=null===(s=String(t).match(/[A-Z]{2,}|\d+(?:\.\d+)?|[A-Z]?[a-z]+/g))||void 0===s?void 0:s.join(" ").replace(/^.|\s./g,(t=>t.toUpperCase()))),a||void 0}catch(t){return}}(this.type,this.getWidgetBarOption("widgetConfig"));return t&&this.customTitle&&e?this.customTitle.substring(0,e.length)===e?this.customTitle:e+": "+this.customTitle:this.customTitle||e||n.t(null,void 0,i(819065))}createHTML(){const t=!!this.widgetConfig&&(!!this.widgetConfig.icon&&this.widgetConfig.icon),e=this.widgetConfig&&this.widgetConfig.emptyHeader,i=this.widgetConfig&&this.widgetConfig.noHeader,s=this.widgetConfig&&this.widgetConfig.noHeaderSpace,a=this.widgetConfig&&this.widgetConfig.widgetClass||"",n=this.widgetConfig&&this.widgetConfig.headerClass||"",o=this.widgetConfig&&this.widgetConfig.titleClass||"",r=this._widget=document.createElement("div");r.classList.value=A()(a,"widgetbar-widget","widgetbar-widget-"+this.type);const l=this._header=document.createElement("div");if(l.classList.value=n||"widgetbar-widgetheader",l.addEventListener("contextmenu",(t=>{"input"!==t.target.tagName.toLowerCase()&&t.preventDefault()})),i||r.appendChild(l),this.$widget=$(this._widget),this.$header=$(this._header),t){const e=this._headerIcon=document.createElement("div");e.classList.value="widgetbar-widgetheader-icon widgetbar-widgetheader-icon-"+t,e.appendChild((0,I.parseHtml)(z[t])),l.appendChild(e),this.$headericon=$(l)}if(!s){const t=this._headerspace=document.createElement("div");t.classList.value="widgetbar-headerspace",t.addEventListener("click",(t=>t.preventDefault())),l.appendChild(t),this.$headerspace=$(t)}if(!e){const t=this._title=document.createElement("div");t.classList.value=A()("widgetbar-widgettitle",o),t.dataset.name=this.type+"_header",t.textContent=this.getTitle(),l.prepend(t),this.$title=$(t)}const h=document.createElement("div");h.classList.value="widgetbar-widgetbody",h.addEventListener("contextmenu",(t=>{t.target===h&&t.preventDefault()})),r.appendChild(h),this._internalState.container.setValue(h);const d=this._resizehandle=document.createElement("div");d.classList.value="widgetbar-widgethandle",d.addEventListener("contextmenu",(t=>{t.target===d&&t.preventDefault()})),null!==this._resizer&&this._resizer.destroy(),this._resizer=new j.PointerBackend({handle:d,onDragStart:t=>{var e;null===(e=this.widgetBarPage)||void 0===e||e.handleWidgetResizeStart(this,t)},onDragMove:t=>{var e;null===(e=this.widgetBarPage)||void 0===e||e.handleWidgetResizeChange(this,t)},onDragStop:t=>{var e;null===(e=this.widgetBarPage)||void 0===e||e.handleWidgetResizeStop(this,t)}}),r.appendChild(d),this.$resizehandle=$(d),!0===this.maximized&&(this.toggleMaximize(!0),delete this.maximized)}demarshal(t){if("string"==typeof t)try{t=JSON.parse(t)
}catch(t){}if(!t||"object"!=typeof t)return null;let e;if("id"in t?(this.id=String(t.id),this.type=this.id.replace(/\..*/,"")):"type"in t?(this.type=String(t.type),this.id=this.type+"."+(0,F.randomHash)()):(delete this.type,delete this.id),null!=t.readonly?this.readonly=!!t.readonly:delete this.readonly,this.stateData=t.data,isFinite(Number(t.heightRatio))&&Number(t.heightRatio)>=0?this.heightRatio=Number(t.heightRatio):this.heightRatio=U.heightRatio,!0===t.maximized&&(this.maximized=!0),!0===t.unAuthEditable&&(this.unAuthEditable=!0),t.settingsKey)e=String(t.settingsKey);else if(this.id){const t=this.getWidgetBarOption("_settingsPrefix");t&&(e=t+".widget."+this.id)}if(this.properties=new O({widgetBarWidget:this,settingsKey:e}),null==t.properties||e&&null!==this.properties.value()||this.properties.setValue(t.properties),"news"!==this.type&&"hotlist"!==this.type||!e||this.properties.setValue((0,s.default)({},t.properties,this.properties.value())),"hotlist"===this.type)if(!e&&t.properties)this.properties.setValue(t.properties);else{const t=this.properties.value();("exchangeByLocale"in t||"groupByLocale"in t)&&(delete t.exchangeByLocale,delete t.groupByLocale,this.properties.setValue(t))}this.widgetConfig=null;const i=this.getWidgetBarOption("widgetConfig");return this.type&&i&&i[this.type]&&(this.widgetConfig=i[this.type]),this}marshal(){var t;const e={};return this.id&&(e.id=this.id),this.type&&(e.type=this.type),this.heightRatio!==U.heightRatio&&(e.heightRatio=this.heightRatio),(null===(t=this.widgetMaximized)||void 0===t?void 0:t.value())&&(e.maximized=!0),e}}U.heightRatio=1;var q=i(957879);class K{constructor(t){this.widgets=[],this.notificationCounter=0,this._page=null,this._invalidated=!1,this._resizeOperations=new WeakMap,this.widgets=[],t&&t.widgetBarLayout&&(this.widgetBarLayout=t.widgetBarLayout)}widget(t){for(const e of this.widgets)if(e.type===t)return e;return null}element(){return this._page}gaEvent(){return this._gaEvent}onActiveStateChange(t){var e;t=!!t,null===(e=this._page)||void 0===e||e.classList.toggle("active",!!t),(0,a.ensure)(this.tab).onActiveStateChange(t),t&&this.updateWidgetsHeight({skipIfHeightUnchanged:!0}),this.widgets.forEach((e=>{e.onActiveStateChange(t)}))}getAvailableHeight(){var t,e;let i=(null===(e=null===(t=this.widgetBarLayout)||void 0===t?void 0:t.widgetBar)||void 0===e?void 0:e.resizerBridge.height.value())||0;if(!i)return 0;let s=0;return this.widgets.forEach(((t,e)=>{if(i-=t.minHeight,e>0){const e=t.widgetConfig&&t.widgetConfig.margin||1;i-=e}const a=t.element("header");a&&(s||(s=(0,D.outerHeight)(a,!0)),i-=s)})),Math.max(i,0)}updateWidgetsHeight(t={}){if(!this._page)return;if(!this.widgetBarLayout||!this.widgetBarLayout.widgetBar)return;if(this.widgetBarLayout.getActivePage()!==this)return void(this._invalidated=!0);const e=this.widgetBarLayout.widgetBar.resizerBridge.height.value();if(this._pageHeight===e&&t.skipIfHeightUnchanged||(this._invalidated=!0,this._pageHeight=e),!this._invalidated)return;let i,s=e,n=0,o=this.widgets,r=null;const l=o.every((t=>0===t.heightRatio))
;for(let t=this.widgets.length;t--;)if((0,a.ensureNotNull)(this.widgets[t].widgetMaximized).value()){r=this.widgets[t];break}if(o.length>0&&null===r&&l){const t=o[o.length-1];t.heightRatio=1,r=t}if(r){for(let t=this.widgets.length;t--;){const e=o[t];e!==r&&e.setHeight(0)}o=[r]}for(let t=o.length-1;t>0;t--){const e=o[t];s-=e.widgetConfig&&e.widgetConfig.margin||1}for(let t=o.length;t--;){const e=o[t],a=e.element("header");a&&(void 0===i&&(i=(0,D.outerHeight)(a,!0)),s-=i,n+=e.heightRatio)}const h=s/n;this._recalculateWidgetsHeightRatio(h);const d=o.length-1;for(let t=0;t<=d;t++){const e=o[t];let i;i=t===d?s:Math.round(h*e.heightRatio),i=Math.max(i,e.minHeight),e.setHeight(i),s-=i}}handleWidgetResizeStart(t,e){let i,s;for(let e=this.widgets.length-1;e>0;e--)this.widgets[e]===t&&(i=this.widgets[e],s=this.widgets[e-1]);(0,a.assert)(void 0!==i),(0,a.assert)(void 0!==s);const n=s.rdState().bridge().height.value(),o=s.heightRatio+i.heightRatio,r=n+i.rdState().bridge().height.value();0===r&&e.preventDefault(),this._resizeOperations.set(t,{bottomWidget:i,topWidget:s,summaryHeight:r,summaryRatio:o,startTopWidgetHeight:n,prevTopWidgetHeight:void 0})}handleWidgetResizeChange(t,e){var i;const s=this._resizeOperations.get(t);if(void 0===s)return;null===(i=this._page)||void 0===i||i.classList.add("widget-resize-mode");const{current:a,initial:n}=e.detail,o=a.pageY-n.pageY,r=Math.max(s.topWidget.minHeight,Math.min(s.startTopWidgetHeight+o,s.summaryHeight-s.bottomWidget.minHeight));s.prevTopWidgetHeight!==r&&(s.prevTopWidgetHeight=r,s.topWidget.heightRatio=r/s.summaryHeight*s.summaryRatio,s.bottomWidget.heightRatio=s.summaryRatio-s.topWidget.heightRatio,s.topWidget.setHeight(r),s.bottomWidget.setHeight(s.summaryHeight-r))}handleWidgetResizeStop(t,e){var i;const s=this._resizeOperations.get(t);void 0!==s&&(this._resizeOperations.delete(t),null===(i=this._page)||void 0===i||i.classList.remove("widget-resize-mode"),s.prevTopWidgetHeight!==s.startTopWidgetHeight&&(this.normalizeRatios(),this.widgetBarLayout&&this.widgetBarLayout.widgetBar&&this.widgetBarLayout.widgetBar.saveToTVSettings()))}normalizeRatios(){let t=1/0;for(let e=this.widgets.length;e--;){const i=this.widgets[e].heightRatio;i<=0||!isFinite(i)||i<t&&(t=i)}if(!isFinite(t))return;let e=1;for(;t<1;)t*=2,e*=2;for(;t>=2;)t/=2,e/=2;for(let t=this.widgets.length;t--;)this.widgets[t].heightRatio*=e}attachWidget(t,e){var i;e=Number(e);const s=this.widgets.indexOf(t);-1!==s?this.widgets.splice(s,1):t.widgetBarPage&&t.widgetBarPage!==this&&t.widgetBarPage.removeWidget(t),e<this.widgets.length?e<0&&(e=0):e=this.widgets.length,delete t.widgetBarPage,Object.defineProperty(t,"widgetBarPage",{value:this,configurable:!0}),this.widgets.splice(e,0,t);const a=this.widgets[e+1],n=t.element("widget");a?n&&n.insertAdjacentElement("beforebegin",a.element("widget")):n&&(null===(i=this._page)||void 0===i||i.appendChild(n)),this.updateWidgetsHeight(),t.updateVisibleWatchedValue()}removeWidget(t){var e;const i=this.widgets.indexOf(t);-1!==i&&(delete t.widgetBarPage,this.widgets.splice(i,1),
null===(e=t.element("widget"))||void 0===e||e.remove(),this.updateWidgetsHeight())}remove(){this.widgetBarLayout&&this.widgetBarLayout.removePage(this)}destroy(){var t;this.remove(),null===(t=this._page)||void 0===t||t.remove()}onVisibilityChange(t){const e=t&&this.widgetBarLayout&&this.widgetBarLayout.getActivePage()===this;this.widgets.forEach((t=>{const i=t.getWidgetBarOption("widgetConfig")[t.type];e&&!i.doNotClearNotificationsOnVisibilityChange&&t.clearNotifications(),t.onVisibilityChange()}))}notify(t,e={}){!0!==e.clear?e.stopHighlightTab||(this.notificationCounter=this.notificationCounter+(~~t||1),this.updateNotifications(e.notificationValue)):this.clearNotifications()}clearNotifications(){this.notificationCounter=0,(0,a.ensure)(this.tab).updateNotifications(this.notificationCounter),this._clearNotificationsCounterAriaLabel()}updateNotifications(t){const e="number"==typeof t?t:this.notificationCounter;(0,a.ensure)(this.tab).updateNotifications(e),this._updateNotificationsCounterAriaLabel(e)}getWidgets(t){const e=[];for(let i=0;i<this.widgets.length;++i){const s=this.widgets[i];s.type===t&&e.push(s)}return e}isActiveAndVisible(){const t=this.widgetBarLayout;return!(!t||!t.visible)&&t.getActivePage()===this}createHTML(){const t=this._page=document.createElement("div");t.classList.value="widgetbar-page",this.$page=q(t),this.widgets.forEach((e=>{e.createHTML();const i=e.element("widget");i&&t.appendChild(i)}))}createTabButtonViewModel(){this.tab=new c({icon:z[this.icon],hint:this.title,onClick:t=>{this.widgetBarLayout&&this.widgetBarLayout.onTabClick(t,this)},TabButtonComponent:this.TabButtonComponent})}demarshal(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}if("object"!=typeof t||!t.widgets||!Array.isArray(t.widgets))return null;const e=this.widgets;return e.splice(0,e.length),this._gaEvent=t._gaEvent,this.title=t.title,this.name=t.name,this.icon=t.icon,this.spaceBottom=t.spaceBottom,this.spaceBottomText=t.spaceBottomText,this.onBottom=t.onBottom,this.TabButtonComponent=t.TabButtonComponent,this._createNotificationCounterAriaLabel=t.createCounterAriaLabel,this.createTabButtonViewModel(),t.widgets.forEach((t=>{const i=new U({widgetBarPage:this}).demarshal(t);i&&e.push(i)})),0===e.length?null:this}marshal(){const t=[];return this.widgets.forEach((e=>{const i=e.marshal();i&&t.push(i)})),0===t.length?null:t}_recalculateWidgetsHeightRatio(t){const e=this.widgets;e.length<=1||e.forEach(((i,s)=>{if(t*i.heightRatio>=i.minHeight)return;let a=i.minHeight/t-i.heightRatio;for(let i=0;i<e.length;i++){if(i===s)continue;const n=e[i],o=n.heightRatio-n.minHeight/t;if(!(o<=0)&&(n.heightRatio-=Math.min(a,o),e[s].heightRatio+=Math.min(a,o),a-=o,a<=0))break}}))}_updateNotificationsCounterAriaLabel(t){this._createNotificationCounterAriaLabel&&(this.notificationCounterAriaLabel=this._createNotificationCounterAriaLabel(t),(0,a.ensure)(this.tab).updateNotificationCounterAriaLabel(this.notificationCounterAriaLabel))}_clearNotificationsCounterAriaLabel(){this.notificationCounterAriaLabel="",(0,
a.ensure)(this.tab).updateNotificationCounterAriaLabel(this.notificationCounterAriaLabel)}}var G=i(996685),J=i(76804),Y=i(73927);var X=i(77122),Q=i(719036),tt=i(778785),et=i(4908),it=i(124526);function st(t){return r.createElement(et.CloseButton,{className:V(t.className,it.button),onClick:t.onClick,"aria-label":n.t(null,{context:"action"},i(768508)),size:"medium",preservePaddings:!0,"data-role":"button","data-name":t.name})}var at=i(152617),nt=i(881182);function ot(t){return r.createElement("div",{className:V(t.className,nt.separator)})}var rt=i(107516);function lt(t){return r.createElement("div",{className:V(rt.filler,t.className)})}function ht(t,e){return class extends r.PureComponent{constructor(t){super(t),this._bindedForceUpdate=()=>this.forceUpdate(),this.state={viewModel:e}}componentDidMount(){const{viewModel:t}=this.state;t.notificationsCount.subscribe(this._bindedForceUpdate),t.notificationCounterAriaLabel.subscribe(this._bindedForceUpdate),t.isActive.subscribe(this._bindedForceUpdate)}componentWillUnmount(){const{viewModel:t}=this.state;t.notificationsCount.unsubscribe(this._bindedForceUpdate),t.notificationCounterAriaLabel.unsubscribe(this._bindedForceUpdate),t.isActive.unsubscribe(this._bindedForceUpdate)}render(){const{viewModel:e}=this.state,i=e.notificationsCount.value(),s=e.notificationCounterAriaLabel.value();return r.createElement(t,{...this.props,icon:e.icon.value(),isActive:e.isActive.value(),onClick:e.onClick.value(),hint:e.hint.value(),count:i,counterAriaLabel:s})}}}var dt=i(83436),ct=i(670467),gt=i(580602),ut=i(263361),vt=i(359332);const pt=(0,r.forwardRef)((function(t,e){const{theme:i=vt,className:s,name:a,count:n,onClick:o,hint:l,icon:h,isActive:d,counterAriaLabel:c,NotificationComponent:g=wt,...u}=t,v=gt.PLATFORM_ACCESSIBILITY_ENABLED?"button":"div",[p,w]=(0,ut.useRovingTabindexElement)(e),m=V(s,i.button,d&&i.isActive,l&&"apply-common-tooltip common-tooltip-vertical"),b=r.createElement(r.Fragment,null,r.createElement("div",{className:i.hoverMask}),r.createElement(dt.Icon,{icon:h}),n?r.createElement("div",{className:i.counterRow},r.createElement(g,{className:i.counter,count:n,ariaLabel:c})):null);return"button"===v?r.createElement("button",{...u,"aria-label":l,ref:p,type:"button",className:V(m,i.accessible),onClick:o,"data-name":a,"aria-pressed":d,"data-tooltip":l,tabIndex:w},b):r.createElement("div",{...u,className:m,title:l,onClick:o,ref:p,"data-role":"button","data-name":a},b)}));function wt(t){const{className:e,count:i,ariaLabel:s=""}=t;return r.createElement(ct.Counter,{"aria-label":s,count:i,size:"small",className:e,compact:!0})}var mt=i(777466),bt=i(201089),ft=i(962624),_t=i(847564),yt=i(604364),Bt=i(115963);const Ct=(0,bt.getLogger)("Platform.GUI.RightToolbar"),Wt=(0,_t.registryContextType)();class Mt extends r.PureComponent{constructor(t,e){super(t,e),this._pages={},this._isOpeningTradingPanelAvailable=null,this._tradingActivePage=null,this._isTradingPanelOpened=null,this._handleMouseOver=t=>{(0,ft.hoverMouseEventFilter)(t)&&this.setState({isHovered:!0})},this._handleMouseOut=t=>{(0,
ft.hoverMouseEventFilter)(t)&&this.setState({isHovered:!1})},this._handleFullscreenChange=t=>{this.setState({isFullscreen:t})},this._handleCloseClick=()=>{const{widgetBar:t}=this.context;(0,a.ensureDefined)(t.layout).setMinimizedState(!0)},(0,_t.validateRegistry)(e,{widgetBar:Q.any.isRequired});const{widgetBar:i}=this.context;if(this._isMinimized=(0,a.ensureDefined)(i.layout).isMinimized.spawn(),this._isFullscreen=i.resizerBridge.fullscreen.spawn(),i.tradingPanelAccessor){const t=i.tradingPanelAccessor.tradingPanel;this._isOpeningTradingPanelAvailable=t.isOpeningAvailable.spawn(),this._tradingActivePage=t.activePage.spawn(),this._isTradingPanelOpened=t.isOpened.spawn()}this.state={isHovered:!1,isFullscreen:this._isFullscreen.value()},(0,a.ensureDefined)(i.layout).pages.forEach((t=>{var e;void 0===t.name&&Ct.logWarn('Page does not provide required field "name"');const i=t.tab;this._pages[t.name]=ht(null!==(e=i.TabButtonComponent)&&void 0!==e?e:pt,i)})),this._toolset=this._createToolset()}componentDidMount(){this._isFullscreen.subscribe(this._handleFullscreenChange)}componentWillUnmount(){this._isFullscreen.destroy(),this._isMinimized.destroy(),null!==this._isOpeningTradingPanelAvailable&&this._isOpeningTradingPanelAvailable.destroy(),null!==this._tradingActivePage&&this._tradingActivePage.destroy(),null!==this._isTradingPanelOpened&&this._isTradingPanelOpened.destroy()}render(){const{className:t}=this.props,{isHovered:e,isFullscreen:i}=this.state,{widgetBar:s}=this.context,a=this._toolset;return r.createElement(at.VerticalScroll,{isVisibleFade:tt.mobiletouch,isVisibleButtons:!tt.mobiletouch&&e,isVisibleScrollbar:!1,onMouseOver:this._handleMouseOver,onMouseOut:this._handleMouseOut},r.createElement(yt.Toolbar,{className:V(t,Bt.toolbar),onContextMenu:mt.preventDefaultForContextMenu,orientation:"vertical","data-name":"right-toolbar"},s.adaptive&&i&&r.createElement(st,{name:"close-button",onClick:this._handleCloseClick}),this._renderPages(),r.createElement(lt,null),this._renderPages(!0),a.SupportTicketButton&&r.createElement(a.SupportTicketButton,{name:"bug-report-button"}),a.HelpButton&&r.createElement(a.HelpButton,{name:"help-button"})))}_renderPages(t){const e=[],{widgetBar:i}=this.context,{pages:s}=(0,a.ensureDefined)(i.layout);return s.forEach((i=>{const s=i.name;if(s in this._pages&&Boolean(i.onBottom)===Boolean(t)){const t=this._pages[s];e.push(r.createElement(t,{name:s,key:s})),i.spaceBottom&&e.push(r.createElement(ot,{key:i.spaceBottomText}))}})),e}_createToolset(){const{widgetBar:t}=this.context;return{SupportTicketButton:this.props.isSupportTicketButtonAvailable?ht(pt,t.ensureSupportTicketButtonViewModel()):void 0,HelpButton:this.props.isHelpButtonAvailable?ht(pt,t.ensureHelpButtonViewModel()):void 0}}}Mt.contextType=Wt;const St={widgetBar:Q.any};class Et extends r.PureComponent{constructor(t){super(t),this._registry={widgetBar:this.props.widgetBar}}render(){return r.createElement(_t.RegistryProvider,{validation:St,value:this._registry},this.props.children)}}const Ht=X.enabled("hide_right_toolbar_tabs")
;class xt{constructor(t,e,i){this._widgetBar=t,this._container=e,this._options=i,Ht||this._render()}updateOptions(t){this._options=t,Ht||this._render()}destroy(){l.unmountComponentAtNode(this._container)}_render(){l.render(r.createElement(Et,{widgetBar:this._widgetBar},r.createElement(Mt,{isHelpButtonAvailable:this._options.isHelpButtonAvailable,isSupportTicketButtonAvailable:this._options.isSupportTicketButtonAvailable})),this._container)}}var Tt=i(27334);const Lt="http://www.w3.org/2000/svg";function zt(t){const{direction:e,theme:i=Tt}=t;return r.createElement("svg",{xmlns:Lt,width:"9",height:"27",viewBox:"0 0 9 27",className:V(i.container,"right"===e?i.mirror:null),onContextMenu:mt.preventDefault},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{className:i.background,d:"M4.5.5a4 4 0 0 1 4 4v18a4 4 0 1 1-8 0v-18a4 4 0 0 1 4-4z"}),r.createElement("path",{className:i.arrow,d:"M5.5 10l-2 3.5 2 3.5"})))}const Vt=n.t(null,void 0,i(943435)),At=n.t(null,void 0,i(538163));function kt(t){const e=V(t.className,"apply-common-tooltip","common-tooltip-vertical","common-tooltip-otl");return r.createElement("div",{className:e,onClick:t.onClick,title:t.isMinimized?At:Vt},r.createElement(zt,{direction:t.isMinimized?"left":"right"}))}var Nt=i(957879);class Pt{constructor(t={}){this.MIN_WIDTH=200,this.MINIMIZE_THRESHOLD=50,this.activeIndex=Pt.activeIndex,this.activeName=Pt.activeName,this.minimized=Pt.minimized,this.visible=Pt.visible,this.width=Pt.width,this.version=Pt.version,this.pages=[],this.isMinimized=new h.WatchedValue,this.activePageIndex=new h.WatchedValue(this.activeIndex),this.tabRenderer=null,this._tabs=null,this._pages=null,this._pagescontent=null,this._handle=null,this._deviceButton=null,this._hider=null,this._draggable=null,this._rightToolbarOptions={isSupportTicketButtonAvailable:X.enabled("bugreport_button"),isHelpButtonAvailable:!X.enabled("widget")&&!X.enabled("charting_library_base")},this._shouldHideWidgetBar=X.enabled("hide_right_toolbar"),this._shouldHideWidgetBarTabs=X.enabled("hide_right_toolbar_tabs"),this.widgetBar=t.widgetBar,this._rightToolbar=Boolean(t.rightToolbar)}element(t){switch(t){case"tabs":return this._tabs;case"pages":return this._pages;case"pages-content":return this._pagescontent;case"handle":return this._handle;case"device-button":return this._deviceButton;case"hider":return this._hider;default:return null}}widget(t){for(const e of this.pages){const i=e.widget(t);if(i)return i}return null}startWidgets(){this.pages.forEach((t=>{t.widgets.forEach((t=>{t.widgetObject||t.widgetStartDelayed||setTimeout((()=>{t.startWidget()}),0)}))}));const t=this.getActivePage();t&&t.onActiveStateChange(!0)}syncHeight(){const t=(0,a.ensureDefined)(this.widgetBar).resizerBridge.height.value();if(null!==this._pages&&(this._pages.style.height=t+"px"),!this.minimized){const t=this.getActivePage();t&&t.updateWidgetsHeight()}}tabsWidth(){return this._shouldHideWidgetBarTabs?0:this._rightToolbar?45:this.minimized?5:0}borderWidth(){return 1*(this.minimized?0:1)}canOpen(){
if(this._shouldHideWidgetBar)return!1;const t=(0,a.ensureDefined)(this.widgetBar);return t.affectsLayout()&&this.MIN_WIDTH+this.tabsWidth()+this.borderWidth()<=t.resizerBridge.availWidth.value()}requestWidth(t){const e=(0,a.ensureDefined)(this.widgetBar).resizerBridge;let i=this.tabsWidth();i>0&&(i+=this.borderWidth());const s=t+i;this.canOpen()?e.width.value()!==s&&e.negotiateWidth([{min:i,max:i},{min:this.MIN_WIDTH+i,max:s}]):e.negotiateWidth(0)}requestOptimalWidth(){this.minimized?this.requestWidth(0):this.requestWidth(this.width)}updateResponsiveness(){var t,e;const i=!this.canOpen();null===(t=this._tabs)||void 0===t||t.classList.toggle("js-hidden",i),null===(e=this._pages)||void 0===e||e.classList.toggle("js-hidden",i)}changeWidgetBarVisibility(t){this._shouldHideWidgetBar=!t,this.updateResponsiveness()}syncWidth(){const t=(0,a.ensureDefined)(this.widgetBar).resizerBridge,e=this.tabsWidth(),i=this.borderWidth(),s=t.width.value(),n=Math.max(s-e-i,0)||0;n<this.MINIMIZE_THRESHOLD?this.setMinimizedState(!0):this.setMinimizedState(!1);const o=this._pages;if(o&&(o.style.width=n+"px",o.classList.toggle("hidden",!!this.minimized)),!this.minimized){const t=this.getActivePage();t&&t.widgets.forEach((t=>{t.onWidthChange(n)})),this.widgetBar&&this.widgetBar.loadWidgets()}const r=!this.canOpen();this._deviceButton&&this._deviceButton.classList.toggle("js-hidden",!r||!this.minimized)}setMinimizedState(t){const e=Boolean(t);!!this.minimized!==e&&(this.minimized=e,this.isMinimized.setValue(this.minimized),e&&(0,a.ensureDefined)(this.widgetBar).resizerBridge.exitFullscreen(),this.requestOptimalWidth(),this.activeIndex>=0&&this.pages[this.activeIndex].onActiveStateChange(!this.minimized))}switchPage(t){if(-1===t||0===this.pages.length)return this.activeIndex=-1,void this.activePageIndex.setValue(this.activeIndex);let e;if(t instanceof K){if(e=this.pages.indexOf(t),-1===e)return}else e=+t;const i=this.pages[this.activeIndex];this.activeIndex=Math.min(this.pages.length-1,Math.max(0,e)),this.activePageIndex.setValue(this.activeIndex);const s=this.pages[this.activeIndex];this.activeName=s.name||"",this.minimized||i&&i===s||(i&&i.onActiveStateChange(!1),s&&(s.onActiveStateChange(!0),this.syncWidth()))}getActivePage(){return this.minimized?null:this.pages[this.activeIndex]||null}getWidgetByType(t){var e;const i=null===(e=this.getActivePage())||void 0===e?void 0:e.widgets;if(i)return i.find((e=>e.type===t))}onTabClick(t,e){if(t.isDefaultPrevented())return;const i=this.pages.indexOf(e);if(-1!==i){if(t.preventDefault(),this._trackClick(e.name),i!==this.activeIndex||this.minimized){const t=e.gaEvent();t&&(0,u.trackEvent)("Platform Widgets",t),this.switchPage(i),this.minimized&&this.setMinimizedState(!1)}else this.setMinimizedState(!0);this.widgetBar&&this.widgetBar.saveToTVSettings()}}removePage(t){const e=this.pages.indexOf(t);if(-1===e)return;delete t.widgetBarLayout,this.pages.splice(e,1);const i=t.element();null==i||i.remove(),this.activeIndex===e&&this.switchPage(e-1)}createPage(){var t;const e=new K({widgetBarLayout:this})
;this.pages.push(e),e.createHTML();const i=(0,a.ensureNotNull)(e.element());return null===(t=this._pagescontent)||void 0===t||t.append(i),e}createWidget(t,e){if(e){if(-1===this.pages.indexOf(e))return null}else e=this.createPage();const i=new U({widgetBarPage:e});return i.demarshal({type:t}),i.createHTML(),e.attachWidget(i),i}onVisibilityChange(){const t=!(!this.widgetBar||!this.widgetBar.resizerBridge.visible.value());this.visible=t,this.pages.forEach((e=>{e.onVisibilityChange(t)}))}destroy(){var t,e,i,s,a,n;this.widgetBar&&this.widgetBar.layout===this&&delete this.widgetBar.layout,this.tabRenderer&&(this.tabRenderer.destroy(),this.tabRenderer=null),this._hider&&l.unmountComponentAtNode(this._hider);for(let t=this.pages.length;t--;){const e=this.pages[t];for(let t=e.widgets.length;t--;)e.widgets[t].destroy()}null===(t=this._tabs)||void 0===t||t.remove(),null===(e=this._pages)||void 0===e||e.remove(),null===(i=this._pagescontent)||void 0===i||i.remove(),null===(s=this._handle)||void 0===s||s.remove(),null===(a=this._deviceButton)||void 0===a||a.remove(),null===(n=this._hider)||void 0===n||n.remove()}updateRightToolbar(){var t;null===(t=this.tabRenderer)||void 0===t||t.updateOptions(this._rightToolbarOptions)}createHTML(){const t=(0,a.ensureDefined)(this.widgetBar);if(this._rightToolbar){const e=this._tabs=document.createElement("div");if(this._shouldHideWidgetBarTabs||(e.classList.value="widgetbar-tabs"),this.$tabs=Nt(e),this.tabRenderer&&(this.tabRenderer.destroy(),this.tabRenderer=null),this._shouldHideWidgetBarTabs||(this.tabRenderer=new xt(t,e,this._rightToolbarOptions)),t.adaptive){const e=this._deviceButton=(0,I.parseHtmlElement)(`\n\t\t<div class="${J.widgetbarButton} js-hidden">\n\t\t\t${Y}\n\t\t</div>\n\t`);e.addEventListener("click",(()=>{t.resizerBridge.requestFullscreen(),(0,u.trackEvent)("Mobile","Open right toolbar")})),this.$deviceButton=Nt(e)}}const e=this._pages=document.createElement("div");this._shouldHideWidgetBarTabs?(e.classList.value="widgetbar-pages-no-tabs",e.setAttribute("data-name","widgetbar-pages-no-tabs")):(e.classList.value="widgetbar-pages",e.setAttribute("data-name","widgetbar-pages-with-tabs"));const i=this._pagescontent=document.createElement("div");i.classList.value="widgetbar-pagescontent",e.appendChild(i),this._rightToolbar||(this._pages.style.right="-1px");const s=this._handle=document.createElement("div");if(s.classList.value="widgetbar-handle",e.appendChild(s),s.addEventListener("contextmenu",(t=>{t.target===s&&t.preventDefault()})),this._createDraggable(s),this.$pages=Nt(e),this.$pagescontent=Nt(i),this.$handle=Nt(s),t.showCloseButton){const t=this._hider=document.createElement("div");t.classList.value="widgetbar-hider",this.$hider=Nt(t);const e=()=>{t.classList.toggle("widgetbar-hider--closed",this.isMinimized.value()),t.classList.toggle("js-hidden",this._rightToolbar&&this.isMinimized.value()),l.render(r.createElement(kt,{isMinimized:this.isMinimized.value(),onClick:()=>{this.setMinimizedState(!this.minimized)}}),t)};this.isMinimized.subscribe(e),e()}
this.pages.forEach((t=>{t.createHTML();const e=t.element();e&&i.appendChild(e)}))}demarshal(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}if("object"!=typeof t)return null;this.width=Number(t.width),!isFinite(this.width)||this.width<=0?this.width=Pt.width:this.width<this.MIN_WIDTH&&(this.width=this.MIN_WIDTH),"minimized"in t?(this.minimized=Boolean(t.minimized),this.isMinimized.setValue(this.minimized)):(this.minimized=Pt.minimized,this.isMinimized.setValue(this.minimized)),"version"in t&&(this.version=t.version);let e=Number(t.activeIndex);const i=t.activeName;let s=!1;const a=this.pages;return a.splice(0,this.pages.length),Array.isArray(t.pages)&&t.pages.forEach(((t,n)=>{const o=new K({widgetBarLayout:this}).demarshal(t);i?t.name===i&&o&&(e=n,s=!0):o||n!==e||e--,o&&a.push(o)})),i&&!s&&(e=0),0===a.length?(this.activeIndex=-1,this.activePageIndex.setValue(this.activeIndex)):e>=0&&e<a.length&&(this.activeIndex=e,this.activePageIndex.setValue(this.activeIndex)),this}marshal(){let t=[];this.pages.forEach((e=>{const i=e.marshal();i&&(t=t.concat(i))}));const e={};for(let i=0;i<t.length;i++){const s=t[i].type;s&&(t[i].id&&delete t[i].type,e[s]?e[s].push(t[i]):e[s]=[t[i]])}const i={widgets:e,settings:{}};return this.minimized!==Pt.minimized&&(i.settings.minimized=this.minimized),this.width!==Pt.width&&(i.settings.width=this.width),this.activeIndex!==Pt.activeIndex&&(i.settings.activeIndex=this.activeIndex),this.activeName!==Pt.activeName&&(i.settings.activeName=this.activeName),this.version!==Pt.version&&(i.settings.version=this.version),i}_createDraggable(t){null!==this._draggable&&this._draggable.destroy();const e={initialWidth:0};this._draggable=new j.PointerBackend({handle:t,onDragStart:t=>{this.widgetBar?e.initialWidth=Math.max(this.widgetBar.resizerBridge.width.value()-this.tabsWidth()-this.borderWidth(),0):t.preventDefault()},onDragMove:t=>{const{current:i,initial:s}=t.detail,a=i.pageX-s.pageX;let n=e.initialWidth-a;n<this.MINIMIZE_THRESHOLD?this.setMinimizedState(!0):(n<this.MIN_WIDTH&&(n=this.MIN_WIDTH),this.width=n,this.minimized?this.setMinimizedState(!1):this.requestWidth(n))},onDragStop:t=>{this.widgetBar&&this.widgetBar.saveToTVSettings()}})}_trackClick(t){switch(t){case"base":(0,G.trackButtonClick)("right panel","watchlist");break;case"alerts":(0,G.trackButtonClick)("right panel","alerts");break;case"object_tree":(0,G.trackButtonClick)("right panel","object tree");break;case"data-window":(0,G.trackButtonClick)("right panel","data window");break;case"hotlist":(0,G.trackButtonClick)("right panel","hotlist");break;case"calendar":(0,G.trackButtonClick)("right panel","calendar");break;case"notes":(0,G.trackButtonClick)("right panel","my ideas");break;case"union_chats":(0,G.trackButtonClick)("right panel","chats");break;case"ideas_stream":(0,G.trackButtonClick)("right panel","ideas stream");break;case"streams":(0,G.trackButtonClick)("right panel","streams");break;case"notifications":(0,G.trackButtonClick)("right panel","notifications")}}}Pt.width=290,
Pt.minimized=!X.enabled("show_right_widgets_panel_by_default"),Pt.activeIndex=0,Pt.activeName="",Pt.visible=!0,Pt.version=void 0;var It=i(223124),Rt=i(439016),Ot=i(588948),Dt=i(791266);function Zt(t){return r.createElement(pt,{...t,NotificationComponent:Ft})}function Ft(t){const{count:e}=t;return e&&e>0?r.createElement("span",{className:Dt.counter}):null}var jt=i(376789),$t=i(68514);function Ut(t){const[e,i]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{function t(){i(!1)}return e&&$t.notificationsOnboardingDelegate.subscribe(null,t),()=>$t.notificationsOnboardingDelegate.unsubscribe(null,t)}),[]),e?r.createElement("div",{onClickCapture:function(t){$t.notificationsOnboardingStart.setValue(!0);const e=document.querySelectorAll(".js-header-user-menu-button");e&&e.forEach((t=>{null!==t.offsetParent&&t.click()}));jt.toolMenuOpenDelegate.fire(),t.stopPropagation(),t.preventDefault()}},r.createElement(pt,{...t})):null}function qt(t){return r.createElement("div",{style:{display:"none"}})}var Kt=i(125226),Gt=i(287918),Jt=i(24154),Yt=i(949279);const Xt=(0,Kt.isFeatureEnabled)("hide_data_window_tab"),Qt=!Xt||Jt.defaultHintStateHandler.getHintState("hint.movedDataWindowWidget");function te(t){const[e,s]=(0,r.useState)(Qt),[o,l]=(0,r.useState)(t.isActive);return(0,r.useEffect)((()=>{t.isActive&&!o&&l(!0)}),[t.isActive]),e?r.createElement("div",{className:Yt.wrapper},r.createElement(pt,{...t}),Xt&&o&&r.createElement(Jt.HintReferenceable,{onClick:function(){var t,e;s(!1);const i=window.widgetbar;if(!i)return;null===(e=null===(t=null==i?void 0:i.layout)||void 0===t?void 0:t.widgetBar)||void 0===e||e.saveToTVSettings();const n=(0,a.ensureNotNull)(i.setPage("object_tree")),o=(0,a.ensureNotNull)(n.widget("object_tree"));(0,a.ensureDefined)(o.properties).setValue({selectedPage:"data-window"})},placement:"auto",text:n.t(null,void 0,i(35705)),buttonText:n.t(null,void 0,i(766238)),settingsHintKey:"hint.movedDataWindowWidget",placeHolderClassName:Yt.hintPlaceholder,hideWithReference:!0,hintStateHandler:Jt.defaultHintStateHandler})):null}var ee=i(474474),ie=i(266325),se=i(731503),ae=i(178911),ne=i(957879);const oe=X.enabled("right_toolbar"),re=(X.enabled("keep_object_tree_widget_in_right_toolbar"),X.enabled("show_object_tree"));class le{constructor(t){this._wrap=null,this._tradingServiceCancelable=null,this.options=t,this._load=()=>{};const e=new Promise((t=>{this._load=t})),i=this.options.configuration;this._configuration=Promise.race([(0,ie.delay)(null,5e3),e]).then((()=>i())).then((t=>{const e=this.widgetConfig;return e.reuters_calendar.ctor=t.ReutersCalendarWidget,e.earnings_calendar.ctor=t.CalendarWidget,e.watchlist.ctor=t.Watchlist,e.hotlist.ctor=t.HotlistWidget,e.detail.ctor=t.Detail&&t.Detail.Widget,e.news.ctor=t.NewsWidget,e.notifications_following.ctor=t.IdeasFeedWidget,e.unionchats.ctor=t.UnionChatsWidget,e.notes.ctor=t.NotesWidget,e.alerts_manage.ctor=t.AlertsManageWidget,e.alerts_log.ctor=t.AlertsLogWidget,e.streams.ctor=t.StreamsWidget,e.datawindow.ctor=t.DataWindowWidget,e.pine_logs.ctor=t.PineLogsWidget,(0,
a.ensure)(e.object_tree).ctor=t.ObjectTreeWidget,(0,Kt.isFeatureEnabled)("enable_notifications_center_in_user_menu")&&!R.getBool("hint.notificationsWidget",!0)||(e.notifications_user.ctor=t.NotificationsWidgets),t}));const n=this.resizerBridge=t.resizerBridge;this.adaptive=Boolean(t.adaptive),this.tradingPanelAccessor=t.tradingPanelAccessor||null,this._visible=(0,o.combine)(((t,e,i)=>Boolean(t&&e&&i)),n.width.weakReference(),n.height.weakReference(),n.visible.weakReference()),this.widgetConfig=(0,s.default)({},L),t.widgetConfig&&(this.widgetConfig=(0,s.default)(this.widgetConfig,t.widgetConfig)),this.layout=new Pt({widgetBar:this,rightToolbar:oe}),this._customization=t.customization||{},t.chartWidgetCollection&&(this.chartWidgetCollection=t.chartWidgetCollection),t.state?this.layout.demarshal(t.state):t.settingsPrefix&&(this._settingsPrefix=String(t.settingsPrefix),this.loadFromTVSettings()),t.readonly&&(this.readonly=!0),t.fixedMode&&(this.fixedMode=!0),t.showCloseButton&&(this.showCloseButton=!0),this._container=this.resizerBridge.container.value(),this.createHTML(),this.initLayout(),window.loginStateChange.subscribe(this,this.onLoginStateChange),this.resizerBridge.width.subscribe((()=>{var t;null===(t=this.layout)||void 0===t||t.syncWidth()})),this.resizerBridge.height.subscribe((()=>{var t;null===(t=this.layout)||void 0===t||t.syncHeight()})),this.resizerBridge.visible.subscribe((()=>{var t,e;null===(t=this.layout)||void 0===t||t.onVisibilityChange(),null===(e=this.layout)||void 0===e||e.requestOptimalWidth()})),this.resizerBridge.availWidth.subscribe((()=>{var t,e;null===(t=this.layout)||void 0===t||t.requestOptimalWidth(),null===(e=this.layout)||void 0===e||e.updateResponsiveness()})),this._tradingServiceCancelable=(0,It.makeCancelable)((0,Rt.waitTradingService)()),this._tradingServiceCancelable.promise.then((t=>{this._tradingServiceCancelable=null,t.onConnectionStatusChange.subscribe(this,this._onBrokerConnectionStatusChanged)}))}destroy(){var t;if(null!==this._tradingServiceCancelable)this._tradingServiceCancelable.cancel(),this._tradingServiceCancelable=null;else{(0,a.ensureNotNull)((0,Rt.tradingService)()).onConnectionStatusChange.unsubscribe(this,this._onBrokerConnectionStatusChanged)}null===(t=this.layout)||void 0===t||t.destroy()}widget(t){return this.layout?this.layout.widget(t):null}isVisible(){const t=this.resizerBridge;return Boolean(t.visible.value()&&t.height.value()&&t.width.value())}affectsLayout(){return this.options.affectsLayout()}visible(){return this._visible}initLayout(){var t;this.options.instantLoad&&this._load(),this.layout&&(this._configuration.then((()=>{var t;null===(t=this.layout)||void 0===t||t.startWidgets()})),0===this.layout.pages.length&&(this.layout.setMinimizedState(!0),null===(t=this.layout.element("handle"))||void 0===t||t.classList.add("js-hidden")),this.layout.requestOptimalWidth(),this.layout.syncWidth(),this.layout.syncHeight(),this.layout.onVisibilityChange(),this.layout.updateResponsiveness())}loadWidgets(){this._widgetsLoadRequested||(this._widgetsLoadRequested=!0,
this._load())}onLoginStateChange(t){t||window.is_authenticated&&(this.dropWidgetData(),this.refreshFromTVSettings())}dropWidgetData(){for(const t in this.widgetConfig)delete(0,a.ensure)(this.widgetConfig[t]).data}refreshFromTVSettings(){var t,e,i;if(!this._settingsPrefix)return;this.layout&&this.layout.destroy(),this.layout=new Pt({widgetBar:this,rightToolbar:oe}),this.loadFromTVSettings(),this.layout.createHTML();const s=this.layout.element("pages");s&&(null===(t=this._wrap)||void 0===t||t.appendChild(s));const a=this.layout.element("tabs");a&&(null===(e=this._wrap)||void 0===e||e.appendChild(a));const n=this.layout.element("hider");n&&(null===(i=this._wrap)||void 0===i||i.appendChild(n)),this.initLayout()}getWidgets(t){let e=[];if(!this.layout)return e;for(let i=0;i<this.layout.pages.length;++i)e=e.concat(this.layout.pages[i].getWidgets(t));return e}loadFromTVSettings(){if(!this._settingsPrefix)return;if(!this.layout)return;let t=this.getLayoutState();t=this.mergeProperties(t),this.layout.demarshal(t),this.saveToTVSettings();const e=this._getSerializedStateFromSetting();if(e){let t=[];for(const i in e.widgets){const s=e.widgets[i];t=t.concat(s.map((t=>t.id)))}const i=R.keysMask(this._settingsPrefix+".widget.*.*");i&&i.forEach((e=>{const i=e.replace(this._settingsPrefix+".widget.","");-1===t.indexOf(i)&&0===e.indexOf(this._settingsPrefix+".widget.")&&((0,u.trackEvent)("Settings debug","loadFromTVSettings: "+e,window.user.username),R.remove(e))}))}}mergeProperties(t){const e=this._getSerializedStateFromSetting();if(!e)return t;e.settings&&Object.assign(t,e.settings);const i={};for(let s=0;s<t.pages.length;s++)for(let a=0;a<t.pages[s].widgets.length;a++){const n=t.pages[s].widgets[a],o=i[n.type]||0;e.widgets[n.type]&&e.widgets[n.type][o]&&Object.assign(n,e.widgets[n.type][o]),i[n.type]=o+1}return t}saveToTVSettings(){if(!this._settingsPrefix)return;if(!this.layout)return;const t=this.layout.marshal();this._setSerializedStateToSettings(t)}getWidgetProperties(t,e=0){const i=(0,a.ensure)(this._settingsPrefix).replace(/\W/g,"\\$&")+".widget.";let s=R.keysMask(i+t+".*");return s&&s.length&&(s=s.sort(),s[e])?{id:s[e].replace(i,"")}:null}getGenericLayoutState(t){const e=(0,ee.getDefaultState)(),s=(0,Ot.getInitData)().streams_enabled,a=window.is_authenticated&&window.TradingView.onChartPage,o=window.is_authenticated&&(!(0,Kt.isFeatureEnabled)("enable_notifications_center_in_user_menu")||R.getBool("hint.notificationsWidget",!0)),r=Qt,l=[{_gaEvent:"General Widget",title:n.t(null,void 0,i(855102)),name:"base",icon:"base",widgets:[{type:"watchlist",properties:t&&t.length?{list:t}:void 0},{type:"detail"},{type:"news",isEnabled:!1}]},X.enabled("alerts")?{_gaEvent:"Alerts",title:n.t(null,void 0,i(363764)),name:"alerts",icon:"alarm-clock",widgets:[{type:"alerts_manage",properties:{}},{type:"alerts_log",properties:{}}],createCounterAriaLabel:Gt.getAlertNotificationCounterAriaLabel}:null,r?{_gaEvent:"Data Window",title:n.t(null,void 0,i(409068)),name:"data-window",icon:"datawindow",TabButtonComponent:te,widgets:[{type:"datawindow"}]
}:null,this.chartWidgetCollection&&!this.chartWidgetCollection.readOnly()?{_gaEvent:"Object tree",title:n.t(null,void 0,i(326371)),name:"object_tree",icon:"object-tree",widgets:[{type:"object_tree",properties:{selectedPage:"object_tree"}}]}:null,{_gaEvent:"Hotlists",title:n.t(null,void 0,i(225669)),name:"hotlist",icon:"hotlists",widgets:[{type:"hotlist",properties:{group:"volume_gainers"}},{type:"hotlist",properties:{group:"percent_change_gainers"}},{type:"hotlist",properties:{group:"percent_change_loosers"}}]},{_gaEvent:"Calendar",title:n.t(null,void 0,i(825034)),name:"calendar",icon:"calendar",widgets:[{type:"reuters_calendar",properties:{}},{type:"earnings_calendar",properties:{}}]},{_gaEvent:"My Ideas",title:n.t(null,void 0,i(137706)),name:"notes",icon:"notes",spaceBottom:!0,spaceBottomText:n.t(null,void 0,i(912997)),widgets:[{type:"notes"}]},{_gaEvent:"Chats",title:n.t(null,void 0,i(62313)),name:"union_chats",icon:"messages",widgets:[{type:"unionchats"}]},{_gaEvent:"Ideas Stream",title:n.t(null,void 0,i(406501)),name:"ideas_stream",icon:"ideas-stream",widgets:[{type:"notifications_following"}]},a?{_gaEvent:"Pine Logs",title:n.t(null,void 0,i(665298)),name:"pine_logs",icon:"messages",widgets:[{type:"pine_logs"}],TabButtonComponent:qt}:null,s?{_gaEvent:"Streams",title:n.t(null,void 0,i(841888)),name:"streams",icon:"streams",widgets:[{type:"streams"}],TabButtonComponent:Zt}:null,o?{_gaEvent:"Notifications",title:n.t(null,void 0,i(230163)),name:"notifications",icon:"notifications",widgets:[{type:"notifications_user"}],TabButtonComponent:(0,Kt.isFeatureEnabled)("enable_notifications_center_in_user_menu")?Ut:void 0}:null];for(let t=0;t<l.length;t++){const i=l[t];i&&e.pages.push(i)}return e}getChartingPlatformLayoutState(t,e){const s=(0,ee.getDefaultState)();if(this._customization.watchlist||this._customization.details||this._customization.news){let a="";const o=[];this._customization.watchlist&&(a=n.t(null,void 0,i(213402)),o.push({type:"watchlist",id:"watchlist."+e,properties:t&&t.length?{list:t}:void 0})),this._customization.details&&(a=this._customization.watchlist?n.t(null,void 0,i(687351)):n.t(null,void 0,i(557027)),o.push({type:"detail"})),this._customization.news&&(a=this._customization.watchlist&&this._customization.details?n.t(null,void 0,i(334422)):this._customization.watchlist?n.t(null,void 0,i(785719)):n.t(null,void 0,i(923278)),o.push({type:"news",id:"news."+e})),s.pages.push({name:"base",title:a,icon:"base",widgets:o})}return this._customization.datawindow&&s.pages.push({title:n.t(null,void 0,i(409068)),name:"data-window",icon:"datawindow",widgets:[{type:"datawindow"}]}),re&&this.chartWidgetCollection&&!this.chartWidgetCollection.readOnly()&&s.pages.push({title:n.t(null,void 0,i(495824)),name:"object_tree",icon:"object-tree",onBottom:!0,widgets:[{type:"object_tree"}]}),s}getLayoutState(){const t=R.getJSON("watchlist.list",[]);let e;e=X.enabled("trading_terminal")?this.getChartingPlatformLayoutState(t,"terminal"):this.getGenericLayoutState(t)
;const i=t=>!(void 0!==t.isEnabled&&!t.isEnabled)&&(this.chartWidgetCollection||!(0,a.ensure)(L[t.type]).chartWidgetRequired);for(let t=e.pages.length-1;t>=0;t--){const s=e.pages[t];s.widgets=s.widgets.filter(i)}return e.pages=e.pages.filter((t=>t.widgets&&t.widgets.length)),e}createWidgetId(t){return t+"."+(0,F.randomHash)()}setPage(t){if(!this.layout)return null;this.layout.setMinimizedState(!1);let e=this.layout.activeIndex;return this.layout.pages.forEach(((i,s)=>{i.name===t&&(e=s)})),this.layout.switchPage(e),this.layout.getActivePage()}ensureSupportTicketButtonViewModel(){return this._supportTicketButtonViewModel||(this._supportTicketButtonViewModel=new c({icon:se,hint:n.t(null,void 0,i(788911)),onClick:()=>{(0,G.trackButtonClick)("right panel","help center"),this._configuration.then((t=>{const e=t.showSupportDialog;e&&e()})),this._load()}})),this._supportTicketButtonViewModel}ensureHelpButtonViewModel(){if(this._helpButtonViewModel)return this._helpButtonViewModel;const t=this.ensureSupportTicketButtonViewModel();return this._helpButtonViewModel=new c({icon:ae,hint:n.t(null,void 0,i(788911)),onClick:t.onClick.value()}),this._helpButtonViewModel}createHTML(){const t=this._container;if(!t)return;if(!this.layout)return;t.innerHTML="",this.layout.createHTML();const e=this._wrap=document.createElement("div");e.classList.value="widgetbar-wrap unselectable js-right-boundary",e.setAttribute("data-name","widgetbar-wrap"),t.appendChild(e),this.$wrap=ne(e);const i=this.layout.element("tabs");oe&&i&&this._wrap.appendChild(i);const s=this.layout.element("pages");s&&this._wrap.appendChild(s);const a=this.layout.element("device-button");a&&this._wrap.appendChild(a);const n=this.layout.element("hider");n&&this._wrap.appendChild(n)}getWrapElement(){return this._wrap}_getSerializedStateFromSetting(){return this._settingsPrefix?R.getJSON(this._settingsPrefix+".layout-settings",null):null}_setSerializedStateToSettings(t){this._settingsPrefix&&R.setJSON(this._settingsPrefix+".layout-settings",t)}_onBrokerConnectionStatusChanged(){var t;null===(t=this.layout)||void 0===t||t.updateRightToolbar()}}},389401:(t,e,i)=>{"use strict";i.d(e,{Measure:()=>a});var s=i(444530);function a(t){const{children:e,onResize:i}=t;return e((0,s.useResizeObserver)(i||(()=>{}),[null===i]))}},354277:(t,e,i)=>{"use strict";i.d(e,{personalIdeaFeedAvailable:()=>n});var s=i(125226);const a=["fr","tr","en","ru","in","ja","it","th_TH","de_DE","es","zh_CN","br","vi_VN","kr"];function n(){return!!a.includes(window.locale)&&(0,s.isFeatureEnabled)("enable_ideas_recommendations_feed")}},27334:t=>{t.exports={container:"container-Wp9adlfh",mirror:"mirror-Wp9adlfh",background:"background-Wp9adlfh",arrow:"arrow-Wp9adlfh"}},530261:t=>{t.exports={wrap:"wrap-Z4M3tWHb",scrollWrap:"scrollWrap-Z4M3tWHb",noScrollBar:"noScrollBar-Z4M3tWHb",content:"content-Z4M3tWHb",icon:"icon-Z4M3tWHb",scrollBot:"scrollBot-Z4M3tWHb",scrollTop:"scrollTop-Z4M3tWHb",isVisible:"isVisible-Z4M3tWHb",iconWrap:"iconWrap-Z4M3tWHb",fadeBot:"fadeBot-Z4M3tWHb",fadeTop:"fadeTop-Z4M3tWHb"}},124526:t=>{
t.exports={button:"button-c8sm3pCb"}},107516:t=>{t.exports={filler:"filler-GfsAWtWz"}},115963:t=>{t.exports={toolbar:"toolbar-S4V6IoxY"}},881182:t=>{t.exports={separator:"separator-gZVyfVJP"}},359332:t=>{t.exports={button:"button-I_wb5FjE",hover:"hover-I_wb5FjE",clicked:"clicked-I_wb5FjE",hoverMask:"hoverMask-I_wb5FjE",icon:"icon-I_wb5FjE",counterRow:"counterRow-I_wb5FjE",counter:"counter-I_wb5FjE",isActive:"isActive-I_wb5FjE",accessible:"accessible-I_wb5FjE"}},791266:t=>{t.exports={counter:"counter-EzgAz2YV"}},810476:(t,e,i)=>{"use strict";function s(t){t.dispatchEvent(new CustomEvent("roving-tabindex:main-element"))}function a(t){t.dispatchEvent(new CustomEvent("roving-tabindex:secondary-element"))}i.d(e,{becomeMainElement:()=>s,becomeSecondaryElement:()=>a})},121807:(t,e,i)=>{"use strict";i.d(e,{useMouseClickAutoBlur:()=>o});var s=i(50959),a=i(184277),n=i(580602);function o(t,e=!0){(0,s.useEffect)((()=>{if(!n.PLATFORM_ACCESSIBILITY_ENABLED||!e)return;const i=e=>{const i=t.current;null!==i&&document.activeElement instanceof HTMLElement&&((0,a.isKeyboardClick)(e)||i.contains(document.activeElement)&&"INPUT"!==document.activeElement.tagName&&document.activeElement.blur())};return window.addEventListener("click",i,!0),()=>window.removeEventListener("click",i,!0)}),[e])}},604364:(t,e,i)=>{"use strict";i.d(e,{Toolbar:()=>c});var s=i(50959),a=i(650151),n=i(763341),o=i(591800),r=i(580602),l=i(810476),h=i(267521),d=i(121807);const c=(0,s.forwardRef)((function(t,e){const{onKeyDown:i,orientation:c,blurOnEscKeydown:g=!0,blurOnClick:u=!0,...v}=t,p=r.PLATFORM_ACCESSIBILITY_ENABLED?{role:"toolbar","aria-orientation":c}:{},w=(0,h.useFunctionalRefObject)(e);return(0,s.useLayoutEffect)((()=>{if(!r.PLATFORM_ACCESSIBILITY_ENABLED)return;const t=(0,a.ensureNotNull)(w.current),e=()=>{const e=(0,r.queryTabbableElements)(t).sort(r.navigationOrderComparator);if(0===e.length){const[e]=(0,r.queryFocusableElements)(t).sort(r.navigationOrderComparator);if(void 0===e)return;(0,l.becomeMainElement)(e)}if(e.length>1){const[,...t]=e;for(const e of t)(0,l.becomeSecondaryElement)(e)}};return window.addEventListener("keyboard-navigation-activation",e),()=>window.removeEventListener("keyboard-navigation-activation",e)}),[]),(0,d.useMouseClickAutoBlur)(w,u),s.createElement("div",{...v,...p,ref:w,onKeyDown:(0,n.createSafeMulticastEventHandler)((function(t){if(!r.PLATFORM_ACCESSIBILITY_ENABLED)return;if(t.defaultPrevented)return;if(!(document.activeElement instanceof HTMLElement))return;const e=(0,o.hashFromEvent)(t);if(g&&27===e)return t.preventDefault(),void document.activeElement.blur();if("vertical"!==c&&37!==e&&39!==e)return;if("vertical"===c&&38!==e&&40!==e)return;const i=t.currentTarget,s=(0,r.queryFocusableElements)(i).sort(r.navigationOrderComparator);if(0===s.length)return;const a=s.indexOf(document.activeElement);if(-1===a)return;t.preventDefault();const n=()=>{const t=(a+s.length-1)%s.length;(0,l.becomeSecondaryElement)(s[a]),(0,l.becomeMainElement)(s[t]),s[t].focus()},h=()=>{const t=(a+s.length+1)%s.length;(0,
l.becomeSecondaryElement)(s[a]),(0,l.becomeMainElement)(s[t]),s[t].focus()};switch((0,r.mapKeyCodeToDirection)(e)){case"inlinePrev":"vertical"!==c&&n();break;case"inlineNext":"vertical"!==c&&h();break;case"blockPrev":"vertical"===c&&n();break;case"blockNext":"vertical"===c&&h()}}),i)})}))},996685:(t,e,i)=>{"use strict";i.d(e,{trackButtonClick:()=>a});var s=i(776734);function a(t,e,i,a){(0,s.getTracker)().then((s=>{null!==s&&s.trackToolbarButtonClick(t,i?`${e} ${i}`:e,a)}))}},152617:(t,e,i)=>{"use strict";i.d(e,{VerticalScroll:()=>g});var s=i(50959),a=i(497754),n=i.n(a),o=i(83436),r=i(764005),l=i(81979),h=i(389401),d=i(530261),c=i(661380);class g extends s.PureComponent{constructor(t){super(t),this._scroll=null,this._handleScrollTop=()=>{this.animateTo(Math.max(0,this.currentPosition()-(this.state.heightWrap-50)))},this._handleScrollBot=()=>{this.animateTo(Math.min((this.state.heightContent||0)-(this.state.heightWrap||0),this.currentPosition()+(this.state.heightWrap-50)))},this._handleResizeWrap=([t])=>{this.setState({heightWrap:t.contentRect.height})},this._handleResizeContent=([t])=>{this.setState({heightContent:t.contentRect.height})},this._handleScroll=()=>{const{onScroll:t}=this.props;t&&t(this.currentPosition(),this.isAtTop(),this.isAtBot()),this._checkButtonsVisibility()},this._checkButtonsVisibility=()=>{const{isVisibleTopButton:t,isVisibleBotButton:e}=this.state,i=this.isAtTop(),s=this.isAtBot();i||t?i&&t&&this.setState({isVisibleTopButton:!1}):this.setState({isVisibleTopButton:!0}),s||e?s&&e&&this.setState({isVisibleBotButton:!1}):this.setState({isVisibleBotButton:!0})},this.state={heightContent:0,heightWrap:0,isVisibleBotButton:!1,isVisibleTopButton:!1}}componentDidMount(){this._checkButtonsVisibility()}componentDidUpdate(t,e){e.heightWrap===this.state.heightWrap&&e.heightContent===this.state.heightContent||this._handleScroll()}currentPosition(){return this._scroll?this._scroll.scrollTop:0}isAtTop(){return this.currentPosition()<=1}isAtBot(){return this.currentPosition()+this.state.heightWrap>=this.state.heightContent-1}animateTo(t,e=l.dur){const i=this._scroll;i&&(0,r.doAnimate)({onStep(t,e){i.scrollTop=e},from:i.scrollTop,to:Math.round(t),easing:l.easingFunc.easeInOutCubic,duration:e})}render(){const{children:t,isVisibleScrollbar:e,isVisibleFade:i,isVisibleButtons:a,onMouseOver:r,onMouseOut:l}=this.props,{heightContent:g,heightWrap:u,isVisibleBotButton:v,isVisibleTopButton:p}=this.state;return s.createElement(h.Measure,{onResize:this._handleResizeWrap},(w=>s.createElement("div",{className:d.wrap,onMouseOver:r,onMouseOut:l,ref:w},s.createElement("div",{className:n()(d.scrollWrap,{[d.noScrollBar]:!e}),onScroll:this._handleScroll,ref:t=>this._scroll=t},s.createElement(h.Measure,{onResize:this._handleResizeContent},(e=>s.createElement("div",{className:d.content,ref:e},t)))),i&&s.createElement("div",{className:n()(d.fadeTop,{[d.isVisible]:p&&g>u})}),i&&s.createElement("div",{className:n()(d.fadeBot,{[d.isVisible]:v&&g>u})}),a&&s.createElement("div",{className:n()(d.scrollTop,{[d.isVisible]:p&&g>u}),
onClick:this._handleScrollTop},s.createElement("div",{className:d.iconWrap},s.createElement(o.Icon,{icon:c,className:d.icon}))),a&&s.createElement("div",{className:n()(d.scrollBot,{[d.isVisible]:v&&g>u}),onClick:this._handleScrollBot},s.createElement("div",{className:d.iconWrap},s.createElement(o.Icon,{icon:c,className:d.icon}))))))}}g.defaultProps={isVisibleScrollbar:!0}},73927:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" fill-rule="evenodd" d="M15.83 7.5l4.67 4.67 4.67-4.67-4.67-4.67-4.67 4.67zm3.26-6.09L13 7.5l6.09 6.09L20.5 15l1.41-1.41L26.6 8.9 28 7.5l-1.41-1.41L21.9 1.4 20.5 0l-1.41 1.41zM4 4h7v7H4V4zM2 2h11v11H2V2zm15 15h7v7h-7v-7zm-2-2h11v11H15V15zM4 17h7v7H4v-7zm-2-2h11v11H2V15z"/></svg>'},335802:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" width="44" height="44"><path fill="currentColor" d="M35 14.66 29.16 9l-.7.72 5.84 5.66.7-.72ZM9 14.66 14.84 9l.7.72-5.84 5.66-.7-.72ZM22 16v7h-5v1h6v-8h-1Z"/><path fill="currentColor" fill-rule="evenodd" d="M22 33a11 11 0 1 0 0-22 11 11 0 0 0 0 22Zm0-1a10 10 0 1 0 0-20 10 10 0 0 0 0 20Z"/></svg>'},661380:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 10" width="20" height="10"><path fill="none" stroke="currentColor" stroke-width="1.5" d="M2 1l8 8 8-8"/></svg>'},66957:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" width="22" height="22"><path d="M6.5 1C5.67 1 5 1.67 5 2.5v1C5 4.33 5.67 5 6.5 5S8 4.33 8 3.5v-1C8 1.67 7.33 1 6.5 1zm8 0c-.83 0-1.5.67-1.5 1.5v1c0 .83.67 1.5 1.5 1.5S16 4.33 16 3.5v-1c0-.83-.67-1.5-1.5-1.5zM1 4v16h19V4h-3.05c-.238 1.164-1.262 2-2.45 2-1.186-.002-2.208-.838-2.445-2H8.95C8.71 5.164 7.687 6 6.5 6c-1.186-.002-2.208-.838-2.445-2H1zm20 2v15H3v1h19V6h-1zM2 8h17v11H2V8zm3 1v3h3V9H5zm4 0v3h3V9H9zm4 0v3h3V9h-3zm-8 4v3h3v-3H5zm4 0v3h3v-3H9zm4 0v3h3v-3h-3z"/></svg>'},452970:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" width="44" height="44"><path fill="currentColor" d="M21.34 12.13a1 1 0 0 1 .98 0l10.41 5.93a1 1 0 0 1 0 1.73l-10.4 5.93a1 1 0 0 1-.99 0L10.78 19.8a1 1 0 0 1 0-1.75l10.56-5.92Zm.49.87-10.56 5.93 10.56 5.93 10.4-5.93L21.84 13ZM33.5 24.86l-11.66 6.8L10 25l.5-.87 11.33 6.38L32.99 24l.5.87Z"/></svg>'},731503:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="45" height="45"><g fill="none" stroke="currentColor"><path d="M14.5 27.5c0 4.97 3.03 8 8 8 4.97 0 8-3.03 8-8v-6a3 3 0 0 0-3-3h-10a3 3 0 0 0-3 3v6z"/><path stroke-linecap="square" d="M22.5 19v16"/><path d="M27.5 18.5a5 5 0 1 0-10 0m13 3h2a2 2 0 0 1 2 2V25m-4 2.5h2a2 2 0 0 1 2 2V31M29 32.5h1.5a2 2 0 0 1 2 2V36m-18-14.5h-2a2 2 0 0 0-2 2V25m4 2.5h-2a2 2 0 0 0-2 2V31m5.5 1.5h-1.5a2 2 0 0 0-2 2V36"/><g transform="translate(12 8)"><circle cx="2.5" cy="2.5" r="2"/><path d="M3.911 3.911L7 7"/></g><g transform="translate(26 8)"><circle cx="4.5" cy="2.5" r="2"/><path d="M3.115 3.885L0 7"/></g></g></svg>'},242765:t=>{
t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" width="44" height="44"><path fill="currentColor" fill-rule="evenodd" d="M15 11h2v4h-2v-4Zm-1 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v1h8v-1a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v1h1a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H13a3 3 0 0 1-3-3V15a3 3 0 0 1 3-3h1v-1Zm4 2h8v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2h1a2 2 0 0 1 2 2v4H11v-4c0-1.1.9-2 2-2h1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2Zm-7 7v11c0 1.1.9 2 2 2h18a2 2 0 0 0 2-2V20H11Zm18-9h-2v4h2v-4Z"/></svg>'},981132:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" width="44" height="44"><path fill="currentColor" d="M16 13h-4v4h-1v-4H7v-1h4V8h1v4h4v1Zm14.5-1H19v-1h11.5a3.5 3.5 0 0 1 3.5 3.5v16a3.5 3.5 0 0 1-3.5 3.5h-17a3.5 3.5 0 0 1-3.5-3.5V20h1v10.5a2.5 2.5 0 0 0 2.5 2.5h17a2.5 2.5 0 0 0 2.5-2.5v-16a2.5 2.5 0 0 0-2.5-2.5ZM14 18.5a2.5 2.5 0 0 1 2.5-2.5h11a2.5 2.5 0 0 1 0 5h-11a2.5 2.5 0 0 1-2.5-2.5Zm2.5-1.5a1.5 1.5 0 0 0 0 3h11a1.5 1.5 0 0 0 0-3h-11ZM29 25H15v-1h14v1Zm0 4H15v-1h14v1Z"/></svg>'},836914:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" width="44" height="44"><path fill="currentColor" fill-rule="evenodd" d="M29.48 15.32c-.16-.14-.4-.07-.48.13a6.05 6.05 0 0 1-2.38 3.13 6.16 6.16 0 0 1-.8.42c-.06.03-.14-.03-.13-.1a19.45 19.45 0 0 0 .08-.9v-.1c.38-5.91-2.43-9.13-4.59-10.41a7.4 7.4 0 0 0-.79-.4c-.1-.05-.21.13-.2.24a5.7 5.7 0 0 1-.04.73v.01c-.27 2.49-2.22 4.29-4.21 6.14-1.63 1.5-3.29 3.05-4.11 5.02a10.48 10.48 0 0 0-.83 4.06A10.9 10.9 0 0 0 20.17 34c.95-.59 1.34-1.82 1.33-3.04 0-.35-.04-.7-.11-1.03.28 0 .68.14 1.07.41A3.36 3.36 0 0 1 23.83 34 10.89 10.89 0 0 0 33 23.29c0-3.15-1.36-5.98-3.52-7.97Zm-4.56 17.4c4.1-1.23 7.08-5 7.08-9.43 0-2.5-.94-4.78-2.5-6.52a6.43 6.43 0 0 1-3.27 3.14m-1.3 12.81a4.3 4.3 0 0 0-2.2-3.39c-.4-.23-.88-.4-1.34-.4h-1.22l.24 1.2c.13.62.12 1.3-.03 1.86-.1.41-.27.73-.48.94A9.9 9.9 0 0 1 12 23.3c0-1.3.27-2.53.75-3.67.42-1 1.1-1.91 1.95-2.81.6-.64 1.23-1.23 1.9-1.84l.87-.82c1.57-1.5 3.2-3.22 3.61-5.54 1.9 1.34 4.29 4.44 3.61 10.16-.09.78.7 1.52 1.55 1.14"/></svg>'},151286:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" width="44" height="44"><path fill="currentColor" fill-rule="evenodd" d="M30 18.5a8.5 8.5 0 0 1-4.5 7.5H22v-6h2v-1h-5v1h2v6h-3.5A8.5 8.5 0 1 1 30 18.5ZM17 27v3a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1v-3h-9Zm-1-.75A9.49 9.49 0 0 1 21.5 9 9.5 9.5 0 0 1 27 26.25V30a2 2 0 0 1-2 2 2 2 0 0 1-2 2h-3a2 2 0 0 1-2-2 2 2 0 0 1-2-2v-3.75ZM20 33a1 1 0 0 1-1-1h5a1 1 0 0 1-1 1h-3ZM6.94 18.5c0-2.2.57-4.26 1.56-6.08L7.67 12a13.48 13.48 0 0 0 0 13l.83-.42a12.6 12.6 0 0 1-1.56-6.08Zm27.56-6.08a12.6 12.6 0 0 1 0 12.16l.83.42a13.48 13.48 0 0 0 0-13l-.83.42ZM9.77 18.5a10 10 0 0 1 1.24-4.82l-.84-.42a10.87 10.87 0 0 0 0 10.48l.84-.42a10 10 0 0 1-1.24-4.82ZM32 13.68a10 10 0 0 1 0 9.64l.84.42a10.87 10.87 0 0 0 0-10.48l-.84.42Z"/></svg>'},425403:t=>{
t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" width="44" height="44"><path fill="currentColor" fill-rule="evenodd" d="M25.5 26a8.5 8.5 0 1 0-8 0H21v-6h-2v-1h5v1h-2v6h3.5ZM17 30v-3h9v3a1 1 0 0 1-1 1h-7a1 1 0 0 1-1-1Zm-5-11.5c0 3.2 1.58 6.03 4 7.75V30c0 1.1.9 2 2 2 0 1.1.9 2 2 2h3a2 2 0 0 0 2-2 2 2 0 0 0 2-2v-3.75A9.49 9.49 0 0 0 21.5 9a9.5 9.5 0 0 0-9.5 9.5ZM19 32a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1h-5Z"/></svg>'},786548:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" width="44" height="44"><path fill="currentColor" fill-rule="evenodd" d="M10.5 11c-.83 0-1.5.67-1.5 1.5v19a2.5 2.5 0 0 0 2.5 2.5h21c.59 0 1.06-.15 1.43-.4C34.82 33.02 35 32 35 31V20.5c0-.83-.67-1.5-1.5-1.5H31v-6.5c0-.83-.67-1.5-1.5-1.5h-19Zm23 9c.28 0 .5.22.5.5V31c0 1.04-.34 2-1.5 2-1.2 0-1.5-1-1.5-2V20h2.5ZM10 31.5c0 .83.67 1.5 1.5 1.5h18.96c-.4-.6-.46-1.3-.46-2V12.5a.5.5 0 0 0-.5-.5h-19a.5.5 0 0 0-.5.5v19Z"/><path fill="currentColor" fill-rule="evenodd" d="M14.5 15c-.83 0-1.5.67-1.5 1.5v3c0 .83.67 1.5 1.5 1.5h3c.83 0 1.5-.67 1.5-1.5v-3c0-.83-.67-1.5-1.5-1.5h-3ZM27 24H13v-1h14v1Zm-6-8h6v-1h-6v1Zm6 3h-6v-1h6v1Zm-14 8h14v-1H13v1Zm7 3h-7v-1h7v1Zm-5.5-14a.5.5 0 0 0-.5.5v3c0 .28.22.5.5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3Z"/></svg>'},496220:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" width="44" height="44"><path fill="currentColor" d="M22.5 11a2.5 2.5 0 0 0-2.48 2.14.5.5 0 0 1-.3.4C16.97 14.63 15 17.2 15 20V27h15V20c0-2.8-1.98-5.37-4.71-6.46a.5.5 0 0 1-.31-.4A2.5 2.5 0 0 0 22.5 11ZM31 27a2 2 0 1 1 0 4h-5.04c-.26 1.57-1.7 3-3.46 3a3.62 3.62 0 0 1-3.46-3H14a2 2 0 1 1 0-4V20c0-3.18 2.16-6.01 5.09-7.28a3.5 3.5 0 0 1 6.82 0C28.84 13.99 31 16.82 31 20V27Zm-10.94 4c.25 1.06 1.26 2 2.44 2s2.19-.94 2.44-2h-4.88ZM14 28a1 1 0 1 0 0 2h17a1 1 0 1 0 0-2H14Z"/></svg>'},232064:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" width="44" height="44"><path fill="currentColor" fill-rule="evenodd" d="M11 14.5a2.5 2.5 0 0 1 2.5-2.5h13a2.5 2.5 0 0 1 2.5 2.5v9a2.5 2.5 0 0 1-2.5 2.5H14.3l-.15.15L11 29.29V14.5Zm2.5-3.5a3.5 3.5 0 0 0-3.5 3.5v17.2l.85-.85L14.71 27H19v.5a3.5 3.5 0 0 0 3.5 3.5H29.3l3.86 3.85.85.86V22.5a3.5 3.5 0 0 0-3.5-3.5H30v-4.5a3.5 3.5 0 0 0-3.5-3.5h-13ZM30 20v3.5a3.5 3.5 0 0 1-3.5 3.5H20v.5a2.5 2.5 0 0 0 2.5 2.5H29.7l.15.15L33 33.29V22.5a2.5 2.5 0 0 0-2.5-2.5H30Z"/></svg>'},481891:t=>{
t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" width="44" height="44"><path fill="currentColor" fill-rule="evenodd" d="M17.63 12.92a3.5 3.5 0 0 1 3.5-3.5h9a3.5 3.5 0 0 1 3.5 3.5v3a3.5 3.5 0 0 1-3.5 3.5h-.7c.13.48.2.98.2 1.5v.5h.5a3.5 3.5 0 0 1 3.5 3.5v11.2l-.85-.84-3.85-3.86h-7.8a3.5 3.5 0 0 1-3.46-3h-3.33l-3.85 3.86-.86.85v-12.2a5.5 5.5 0 0 1 5.5-5.5h2.5v-2.5Zm1.05 15.5a2.5 2.5 0 0 0 2.45 2h8.21l.15.15 3.14 3.14v-8.79a2.5 2.5 0 0 0-2.5-2.5h-.5v.5a5.5 5.5 0 0 1-5.5 5.5h-5.45Zm10.45-10v.2a5.5 5.5 0 0 0-5-3.2h-5.5v-2.5a2.5 2.5 0 0 1 2.5-2.5h9a2.5 2.5 0 0 1 2.5 2.5v3a2.5 2.5 0 0 1-2.5 2.5h-1Zm-14-2a4.5 4.5 0 0 0-4.5 4.5v9.8l3.15-3.15.15-.15h10.2a4.5 4.5 0 0 0 4.5-4.5v-2a4.5 4.5 0 0 0-4.5-4.5h-9Z"/></svg>'},178911:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" width="44" height="44"><path fill="currentColor" d="M10 21.5a11.5 11.5 0 1 1 23 0 11.5 11.5 0 0 1-23 0ZM21.5 9a12.5 12.5 0 1 0 0 25 12.5 12.5 0 0 0 0-25ZM18 17c0-.87.32-1.6.9-2.13a3.78 3.78 0 0 1 2.6-.87c2.32 0 3.5 1.37 3.5 2.5 0 1.23-.8 1.96-1.8 2.7l-.27.2c-.4.3-.83.61-1.16.95-.42.42-.77.95-.77 1.65v2h1v-2c0-.32.15-.62.48-.95.27-.27.62-.52 1.01-.81l.3-.23c1-.74 2.21-1.74 2.21-3.51 0-1.87-1.82-3.5-4.5-3.5-1.35 0-2.48.4-3.27 1.13A3.8 3.8 0 0 0 17 17h1Zm4.5 11c0 .55-.46 1-1 1s-1-.45-1-1 .46-1 1-1 1 .45 1 1Zm-1 2c1.08 0 2-.9 2-2s-.92-2-2-2-2 .9-2 2 .92 2 2 2Z"/></svg>'},525336:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" width="44" height="44"><path fill="currentColor" d="M27.45 29.06a8.76 8.76 0 0 0-.05-14.13l.5-.87a9.76 9.76 0 0 1 .05 15.87l-.5-.87Zm2.89 5.44-.5-.87a14.01 14.01 0 0 0-.05-23.26l.5-.87a15.01 15.01 0 0 1 .05 25ZM15 15.9l8.22 5.6L15 27.1V15.9Zm8.79 4.77-8.23-5.6a1 1 0 0 0-1.56.82v11.22a1 1 0 0 0 1.56.82l8.23-5.6a1 1 0 0 0 0-1.66Z"/></svg>'},191085:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" width="44" height="44"><path fill="currentColor" d="M13 11h18a2 2 0 0 1 2 2v17a2 2 0 0 1-2 2H13a2 2 0 0 1-2-2V13c0-1.1.9-2 2-2Zm18-1H13a3 3 0 0 0-3 3v17a3 3 0 0 0 3 3h18a3 3 0 0 0 3-3V13a3 3 0 0 0-3-3Zm-2 11H15v1h14v-1Zm-14-5h14v1H15v-1Zm14 10H15v1h14v-1Z"/></svg>'}}]);